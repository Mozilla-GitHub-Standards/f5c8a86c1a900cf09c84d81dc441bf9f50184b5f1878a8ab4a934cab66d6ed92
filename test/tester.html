<!DOCTYPE html>

<html>
<head>
    <title>Tester Service Provider</title>
</head>

<body>
<h1>Tester Service Provider</h1>
<script>
var currentActivity;

window.addEventListener("message", function(event) {
  if (!event.source) {
    // when xul sends the event, source is null
    var msg = JSON.parse(event.data);
    if (msg.topic == 'activity') {
        currentActivity = msg.activity;
        document.getElementById('output').value = event.data;
    }
  }
}, false);

function sendResult(data) {
    data.action = currentActivity.action;
    data.data = currentActivity.data;
    var response = JSON.stringify({
      topic: "activity",
      data: data
    });
    window.postMessage(response, "*");
}
</script>
<textarea id="output"></textarea>
<button style="font-size:18px" onclick="sendResult({success:'Your share was great!'})">Respond with Success</button>
<button style="font-size:18px" onclick="sendResult({error:'bummer'})">Respond with Error</button>

</body>
</html>
