<!DOCTYPE html>

<html>
<head>
    <title>Tester Service Provider</title>
</head>

<body>
<h1>Tester Service Provider</h1>
<script>
window.addEventListener("message", function(event) {
  dump("test.html got message\n");
  dump(JSON.stringify(event.data) + " from "+(event.source?event.source.location:"addon")+"\n");
  document.getElementById('output').value = JSON.stringify(event.data) + " from "+(event.source?event.source.location:"addon")+"\n";
}, false);
window.addEventListener("load", function() {
  dump("try to send message from test.html\n");
  try {
    window.postMessage(JSON.stringify({test:"tester.html"}), "*");
  } catch(e) {
    dump(e+"\n");
  }
}, true);
    
</script>
<textarea id="output"></textarea>
</body>
</html>
