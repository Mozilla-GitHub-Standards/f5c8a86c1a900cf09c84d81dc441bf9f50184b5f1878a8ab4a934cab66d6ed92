<html>
<head>
<title>startActivity demonstration</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript">

function showResult(msg)
{
  document.getElementById("output").value = msg;
}

function doit(args) {
  if (!navigator.mozActivities || !navigator.mozActivities.startActivity)
  {
    showResult("Can't invoke service: not supported by current browser");
    return;
  }

  var activity = {
    action: "share",
    type: "text/uri",
    data: "http://somesite.com/",
    extras: {
      title: "A test share page",
      description: "Demonstration page for testing purposes",
    }
  };

  var port = navigator.mozActivities.startActivity(activity);
  port.onmessage = function(msg) {
    showResult(msg);
  }
}

</script>
<style>
#output {
  padding:6px;
  margin-top:32px;
  min-width:400px;
  max-width:640px;
  min-height:100px;
  width:640px;
  background-color:#f8f8f8;
  border-radius:1em;
  border:1px solid #909090;
  font:9pt "Lucida Granda", Tahoma, sans-serif;
}
</style>
</head>
<body>
<div style="width:660px;margin:auto;padding-top:16px">

<h2>startActivity demonstration</h2>
<p>
This page demonstrates the use of the <code>startActivity</code> function.  When you click the
"Share" button, below, the page will ask your browser to connect it to an application
that provides the <code>share</code> activity.
</p>

<p>
What happens next is up to your browser.  If you are using a browser that understands the
service discovery API, you may see a dialog box, "doorhanger" or other native user interface
element.  If you are not, you may see an HTML-native implementation of the service discovery
API (depending on whether we've implemented that yet).
</p>

<button style="font-size:18px" onclick="doit()">Share with JS</button>
<button style="font-size:18px"
        type="action"
        data-action="share"
        data-url="http://www.caraveo.com/"
        title="some random site"
        contenttype="url">Share with HTML</button>

<textarea id="output"></textarea>
</div>
</div>
</body>
</html>